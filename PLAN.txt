PLAN - invoice-validation-system
Last updated: 2025-12-30

Status legend: DONE / PARTIAL / TODO

Day 1 (2025-12-30) - Core engine
08:00-09:00 | Setup & data understanding [DONE]
- requirements.txt created (pandas/numpy/sklearn/rapidfuzz/python-dateutil/pytest)
- scripts/setup.ps1 for venv + deps
- data_overview.ipynb at repo root
- data/ground_truth.json, data/ocr_results.json, data/database.json
- risk list added in notebook

09:00-11:00 | Normalize + fuzzy matching [DONE]
- src/preprocess/normalize.py (normalize_text, ocr_confusion_normalize, address/company maps)
- src/match/fuzzy.py (token_set + edit ratio, RapidFuzz fallback)
- Tests: OCR confusion covered in tests/test_validation.py (po_number)

11:00-13:00 | Rule engine validate_invoice [DONE]
- src/rules/validation.py (status/discrepancies/confidence_score/validation_details)
- field policies: id exact/near-exact, fuzzy for names/addresses, date/amount rules

14:00-16:00 | Line items parsing + anomaly detection [DONE]
- src/rules/line_items.py (parse text, valid_items, max_quantity, total checks)

16:00-18:00 | Discrepancy objects + visualization + tests [DONE]
- src/output/notifications.py (build_discrepancy)
- src/output/visualize.py (generate_visual_feedback)
- tests/test_validation.py (15 cases)

Day 2 (2025-12-31) - Quality, docs, demo
08:00-10:00 | Confidence calibration + status [DONE]
- src/scoring/confidence.py (weights + penalties)
- src/config.py (thresholds/weights, status policy)

10:00-12:00 | Status tracking + correction logging [DONE]
- src/tracking/status.py (init, log_correction, transition_status)

13:00-15:00 | Notebook + sample outputs (3 invoices) [TODO]
- Add notebook section: analysis/challenges/metrics
- Generate sample outputs JSON (validation + discrepancies + visualization coords)

15:00-16:15 | Design Doc (DESIGN.md/PDF) [TODO]
- Approach/methodology, assumptions/limitations
- Scalability + recommendations (feedback loop, monitoring, privacy)

16:15-17:00 | Hardening + packaging [PARTIAL]
- pytest passes
- README has setup + Option A
- TODO: add run_demo and sample output steps to README
- TODO: ensure sample_outputs/ directory exists

Option A (Logistic Regression) [DONE]
- src/ml/features.py, train.py, predict.py
- scripts/train_model.py
- models/logreg.pkl generated

Current key scripts
- scripts/train_model.py (train Option A)
- scripts/run_demo.py (validate 3 invoices, print results)

Recommended next steps (order)
1) Add scripts/generate_sample_outputs.py to write JSON outputs to sample_outputs/
2) Expand tests to 8-12 cases (date invalid, tax small diff, abbreviation)
3) Extend data_overview.ipynb with analysis/metrics section
4) Write DESIGN.md
5) Update README with run_demo + sample_outputs instructions
